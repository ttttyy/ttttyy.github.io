<!DOCTYPE html>
<html lang="zh-CN">
    <head>
	<meta name="generator" content="Hugo 0.101.0" />
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Glitt0x blog</title><meta name="Description" content="Hugo theme - LoveIt"><meta property="og:title" content="Glitt0x blog" />
<meta property="og:description" content="Hugo theme - LoveIt" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://ttttyy.github.io/" /><meta property="og:image" content="https://ttttyy.github.io/logo.png"/><meta property="og:site_name" content="Glitt0x blog" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://ttttyy.github.io/logo.png"/>

<meta name="twitter:title" content="Glitt0x blog"/>
<meta name="twitter:description" content="Hugo theme - LoveIt"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://ttttyy.github.io/" /><link rel="alternate" href="/index.xml" type="application/rss+xml" title="Glitt0x blog">
    <link rel="feed" href="/index.xml" type="application/rss+xml" title="Glitt0x blog"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https:\/\/ttttyy.github.io\/","inLanguage": "zh-CN","author": {
                "@type": "Person",
                "name": "Glitter"
            },"description": "Hugo theme - LoveIt","image": {
                "@type": "ImageObject",
                "url": "https:\/\/ttttyy.github.io\/images\/Apple-Devices-Preview.png",
                "width":  3200 ,
                "height":  2048 
            },"thumbnailUrl": "https:\/\/ttttyy.github.io\/images\/screenshot.png","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","name": "Glitt0x blog"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Glitt0x blog"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>Glitt0x blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 目录 </a><a class="menu-item" href="/categories/documentation/"> 文档 </a><a class="menu-item" href="/about/"> 关于 </a><a class="menu-item" href="https://github.com/dillonzq/LoveIt" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="Select Language">简体中文<i class="fas fa-chevron-right fa-fw" aria-hidden="true"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/zh-cn/">English</option><option value="/" selected>简体中文</option></select>
                    </a><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Glitt0x blog"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>Glitt0x blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">目录</a><a class="menu-item" href="/categories/documentation/" title="">文档</a><a class="menu-item" href="/about/" title="">关于</a><a class="menu-item" href="https://github.com/dillonzq/LoveIt" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Select Language">简体中文<i class="fas fa-chevron-right fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/zh-cn/">English</option><option value="/" selected>简体中文</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="page home" data-home="posts"><div class="home-profile"><div class="home-avatar"><a href="/posts/" title="所有文章"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/avatar.png"
        data-srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x"
        data-sizes="auto"
        alt="/images/avatar.png"
        title="/images/avatar.png" width="560" height="560" /></a></div><div class="home-subtitle"><div id="id-1" class="typeit"></div></div><div class="links"><a href="https://github.com/ttttyy" title="GitHub" target="_blank" rel="noopener noreffer me"><i class="fab fa-github-alt fa-fw" aria-hidden="true"></i></a>
<a href="https://twitter.com/xxxx" title="Twitter" target="_blank" rel="noopener noreffer me"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a>
<a href="https://www.instagram.com/xxxx" title="Instagram" target="_blank" rel="noopener noreffer me"><i class="fab fa-instagram fa-fw" aria-hidden="true"></i></a>
<a href="https://facebook.com/xxxx" title="facebook" target="_blank" rel="noopener noreffer me"><i class="fab fa-facebook fa-fw" aria-hidden="true"></i></a>
<a href="https://t.me/xxxx" title="Telegram" target="_blank" rel="noopener noreffer me"><i class="fab fa-telegram-plane fa-fw" aria-hidden="true"></i></a>
<a href="https://www.youtube.com/user/xxxx" title="YouTube" target="_blank" rel="noopener noreffer me"><i class="fab fa-youtube fa-fw" aria-hidden="true"></i></a>
<a href="https://weibo.com/u/6398381223" title="微博" target="_blank" rel="noopener noreffer me"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a>
<a href="https://mastodon.technology/@xxxx" title="Mastodon" target="_blank" rel="noopener noreffer me"><i class="fab fa-mastodon fa-fw" aria-hidden="true"></i></a>
<a href="mailto:mianbtaeno@gmail.com" title="Email" rel=" me"><i class="far fa-envelope fa-fw" aria-hidden="true"></i></a>
</div></div>
<article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/newton/">牛顿迭代法</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Glitter</a>
</span>&nbsp;<span class="post-publish">published on <time datetime="2022-11-09">2022-11-09</time></span></div><div class="content">牛顿法是一种在实数域和复数域上近似求解方程的方法，最初由牛顿在《流数法》中提出，此方法使用函数$f(x)$的泰勒级数的前面几项来寻找方程$f(x)=0$的根。
方法说明 首先，选择一个接近函数$f(x)$零点的$x_0$，计算相应的$f(x_0)$和切线斜率$f^{\prime}(x_0)$。然后计算穿过点$(x_0,f(x_0))$并且斜率为$f^{\prime}(x_0)$的直线与$x$州的交点的坐标，即求下面方程的解： \begin{equation} 0=(x-x_0)\cdot f^{\prime}(x_0)+f(x_0) \end{equation}
将新求得的点的$x$坐标命名为$x_1$,通常$x_1$会比$x_0$更接近方程$f(x)=0$的解。因此可以利用$x_1$开始下一轮迭代。迭代公式可化简为如下所示： \begin{equation} x_{n+1}=x_n-\frac{f(x_n)}{f^{\prime}(x_n)} \end{equation}
随着迭代次数的增加，$x_n$会越来越接近方程的解。
示例 求解平方根 设$f(x)=x^2-n$，$f(x)=0$的解就是$\sqrt{n}$的近似值，于是有 \begin{equation} x_{i+1}=x_i-\frac{x^2_i-n}{2x_i}=\frac{x_i+\frac{n}{x_i}}{2} \end{equation}
代码如下
1 2 3 4 5 6 7 8 9 10 11 double sqrt_newton(double n) { const double eps = 1e-15; double x = 1; while(true){ double nx = ( x + n / x ) / 2; if(abs(x -nx) &lt; eps) break; x = nx; } return x; } </div><div class="post-footer">
        <a href="/newton/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/%E6%95%B0%E5%AD%A6/">数学</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/ecc/">理解椭圆曲线密码</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Glitter</a>
</span>&nbsp;<span class="post-publish">published on <time datetime="2022-10-30">2022-10-30</time></span></div><div class="content">群 定义 群$(G,\cdot)$是由非空集合$G$和二元运算$\cdot$构成的，且符合以下四个性质的数学结构。
封闭性：对于所有$G$中的$a$，$b$，运算$a\cdot b$的结果也在$G$中； 结合律：对于所有$G$中的$a$，$b$和$c$，等式$(a\cdot b)\cdot c = a\cdot (b \cdot c)$成立； 单位元：存在$G$中的一个元素$e$，使得对于所有$G$中的元素$a$，总有等式$e \cdot a = a \cdot e = a$成立； 逆元：对于每个$G$中的$a$，存在$G$中的一个元素$b$使得总有$a \cdot b = b \cdot a = e$，则称$b$为$a$在$G$中的逆元，$e$为单位元。 例如，整数集和整数间的加法$(\mathbb{Z},+)$构成一个群，单位元是$0$，一个整数的逆元是它的相反数。 相关概念 若代数结构$(G,\cdot)$满足封闭性和结合律性质，则称$(G,\cdot)$为一个半群。 对于$G$中的所有$a$，$b$,等式$a\cdot b = b \cdot a$成立，则群$(G,\cdot)$为可交换群。 一个群可以有有限个元素，此时，元素的个数称为群的阶，记为$|G|$，也可以含有无限个元素。 给定群$G$，如果集合$H \subseteq G$，且$H$中包含了单位元，$H$中每个元素的逆元也在$H$中，则称$H$为$G$的子群。 给定群$(G,\cdot)$，求幂操作即对一个元素$a$应用$n$次运算符$cdot$，表示为 \begin{equation} a^n = \underbrace{a\cdot a \cdot a \cdots a}_{n} \end{equation} 特别的，$a^0=e$ 循环群：是指能由群中的某个元素做幂运算而生成的群，例如整数加群$(\mathbb{Z},+)$是一个无限循环群，生成元为$1$或$-1$ 拉格朗日定理：设$H$是有限群$G$的一个子群，则$H$的阶整除$G$的阶。 推论1：若$a$是有限群$G$的一个元素，则$a$的阶整除$G$的阶。 推论2：阶为质数的群都是循环群。 推论3：费马小定理是拉格朗日定理的一个简单推论 环 环是由集合$R$和定义在$R$的加法和乘法两种二元运算构成的，且满足以下性质的代数结构$(R,+,\cdot)$：
$(R,+)$构成交换群，其单位元记为$0$，$R$中元素$a$的加法逆元记为$-a$； $(R,\cdot)$构成半群； 乘法对于加法满足分配律，即对所有的$a,b,c \in R$有： $a \cdot (b+c) = (a\cdot b)+(a\cdot c)$ $(a+b)\cdot c = (a \cdot c) + (b \cdot c)$ 特殊的环 交换环：若环$(R,\cdot)$满足交换律，则$R$称为交换环 幺环：若环$R$存在乘法单位元$1$，则称$R$为幺环。 除环：若幺环$R$的所有非零元素存在乘法逆元$a^{-1}$，则称$R$为除环。 域 在抽象代数中，域是一种集合，在这个集合中可以对集合的非零元素进行加减乘除，其运算定义与行为就如同有理数和实数一样。域是交换除环。</div><div class="post-footer">
        <a href="/ecc/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/ecc/">ECC</a>,&nbsp;<a href="/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/">密码学</a>,&nbsp;<a href="/tags/%E6%95%B0%E5%AD%A6/">数学</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/rsa/">RSA算法的数学原理及证明</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Glitter</a>
</span>&nbsp;<span class="post-publish">published on <time datetime="2022-10-29">2022-10-29</time></span></div><div class="content">概述 RSA是一种广泛使用的非对称加密算法，由由罗纳德·李维斯特（Ron Rivest）、阿迪·萨莫尔（Adi Shamir）和伦纳德·阿德曼（Leonard Adleman）在1977年一起提出的，RSA就是他们三人姓氏头字母组成的。
对极大整数做因式分解的难度决定了RSA算法的可靠性，目前被破解的最长的RSA密钥为829位。只要密钥的长度足够长，用RSA加密的信息可以认为是无法破解的。下面将介绍与RSA算法相关的数学概念，RSA的算法流程及正确性证明。
与RSA算法相关的数学概念 互质 如果两个正整数除了1之外，没有别的公因数，就称这两个数互质。关于互质，有以下几个推论：
任意两个质数构成互质关系； 一个数是质数，另一个数只要不是它的倍数，则这两个数互质； 如果两个数中，较大的那个数是质数，则这两个数互质； $1$和任意自然数互质； $p$是大于$1$的整数，则$p$和$p-1$互质； $p$是大于$1$的奇数，则$p$和$p-2$互质。 欧拉函数 算术基本定理 任意一个大于$1$的自然数，要么本身是质数，要么可以写成两个或以上质数的积，而且这些质因子按大小排列之后，写法仅有一种方式。 在数论中，对正整数$n$，欧拉函数$\varphi(n)$是小于等于$n$的正整数中与$n$互质的数的数目。
\begin{equation} \varphi(n)= p_1^{k_1-1}p_2^{k_2-1}\cdots p_r{k_r-1}(p_1-1)(p_2-1)\cdots(p_r-1) \end{equation}
$p_1，p_2 \dots p_r$是$n$的质因子，该函数也可等价的写成 \begin{equation} \varphi(n)=n(1-\frac{1}{p_1})(1-\frac{1}{p_2})\cdots(1-\frac{1}{p_r}) \end{equation}
欧拉定理 欧拉定理是RSA算法的核心，理解了这个定理，就理解了RSA。欧拉定理指 如果两个正整数$a$和$n$互质，$\varphi(n)$是$n$的欧拉函数，则 \begin{equation} a^{\varphi(n)} \equiv 1 \ (mod \ n) \end{equation} 欧拉定理有一个特殊情况，假设正整数$a$与质数$p$互质，因为质数$p$的欧拉函数$\varphi(n)$等于$p-1$，则欧拉定理可以写成 \begin{equation} a^{p-1} \equiv 1 \ (mod \ n) \end{equation} 这就是著名的费马小定理，它是欧拉函数的特例。
模反元素 如果两个正整数$a$和$n$互质，那么一定可以找到整数$b$，使得$ab-1$被$n$整除，这是$b$就叫做$a$的模反元素。 欧拉定理可以证明模反元素必然存在 \begin{equation} a^{\varphi(n)}=a \times a^{\varphi(n)-1} \equiv 1 \ (mod \ n) \end{equation} 可以看到，$a^{\varphi(n)-1}$就是$a$的模反元素。
RSA密钥生成步骤 随机选择两个不相等的质数$p$和$q$。 假设$p=61，q=53$ 计算$p$和$q$的乘积$n$，$n = pq = 61 \times 53 = 3233$ 计算$n$的欧拉函数$\varphi(n)$，根据公式$\varphi(n)=(p-1)(q-1)=3120$ 欧拉函数性质 如果$p$为质数，则$\varphi(p) = p-1$; 如果$n$可以分解成两个互质的整数$p$和$q$之积，则$\varphi(n)=\varphi(p)\varphi(q)$ 在$1$到$\varphi(n)$之间随机选择一个与$\varphi(n)$互质的整数$e$ 计算$e$对于$\varphi(n)$的模反元素$d$。 \begin{equation} ed \equiv 1 \ (mod \ \varphi(n)) \end{equation} 上式等价于 \begin{equation} ed - 1 = k\varphi(n) \end{equation} 于是，找到模反元素$d$，实质上就是对下面这个二元一次方程求解 \begin{equation} ex+\varphi(n)y = 1 \end{equation} 此方程可以用扩展欧几里得算法扩展求解，通过计算，得到$d=2753$。 将$n$和$e$封装成公钥，$n$和$d$封装成私钥。 RSA算法的可靠性 公钥$(n，e)$是公开的，只要得知了$d$，就等于私钥泄露，即已知$n$和$e$，是否可能推导出$d$?</div><div class="post-footer">
        <a href="/rsa/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/">密码学</a>,&nbsp;<a href="/tags/rsa/">RSA</a>,&nbsp;<a href="/tags/%E6%95%B0%E5%AD%A6/">数学</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/first/">第一篇文章</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Glitter</a>
</span>&nbsp;<span class="post-publish">published on <time datetime="2022-08-11">2022-08-11</time></span></div><div class="content">xxxxxxxxx $$ c = \pm\sqrt{a^2 + b^2} $$
\[ f(x)=\int_{-\infty}^{\infty} \hat{f}(\xi) e^{2 \pi i \xi x} d \xi \]
\begin{equation*} \rho \frac{\mathrm{D} \mathbf{v}}{\mathrm{D} t}=\nabla \cdot \mathbb{P}+\rho \mathbf{f} \end{equation*}
\begin{equation} \mathbf{E}=\sum_{i} \mathbf{E}_{i}=\mathbf{E}_{1}+\mathbf{E}_{2}+\mathbf{E}_{3}+\cdots \end{equation}
\begin{align} a&amp;=b+c \\ d+e&amp;=f \end{align}
\begin{alignat}{2} 10&amp;x+&amp;3&amp;y = 2 \\ 3&amp;x+&amp;13&amp;y = 4 \end{alignat}
\begin{gather} a=b \\ e=b+c \end{gather}
\begin{CD} A @&gt;a&gt;&gt; B \\ @VbVV @AAcA \\ C @= D \end{CD}
1 2 3 int main(){ printf(&#34;hello&#34;); } </div><div class="post-footer">
        <a href="/first/">Read More</a></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/chain-replication/">Chain Replication论文阅读笔记</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Glitter</a>
</span>&nbsp;<span class="post-publish">published on <time datetime="2022-05-19">2022-05-19</time></span></div><div class="content">为了解决主从备份模型无法同时实现高吞吐量，高可用性和强一致性的问题，论文提出了一种链复制技术，其主要思路是所有节点链式连接，查询操作只发送到tail节点，而更新操作则从头节点head依次更新到tail，tail回复消息给客户端。
链复制协议 如果集群中有T个节点，该协议最多容忍t-1个节点失效。节点间还要保持健壮的FIFO通信，该协议不区分发送失败和请求被忽略。
$ Hist_{objID}^{T} $表示TAIL通过的update请求序列，上标表示节点的序号。 $Pending_{objID}$表示链收到但是没有被TAIL处理的请求。 fail-stop 如果失败，宁可停止服务，也不能进行错误的状态转移(强一致性)， 环境有能力监测到故障。 处理节点故障 为了检测故障，该协议假设了一个永不会失败的master节点，其作用有：
监测节点失败 在删除失败节点后向链上的每个节点通知其新的前驱和后置节点 通知客户端链的首尾节点 头节点故障 头节点的后继节点成为新的头节点，可以看作是T2，对一致性没有影响。
尾节点故障 尾节点的前驱节点成为新的尾节点，由倒数第二个节点处理过的Pending请求会变成已被尾结点处理，也就是重复了T3，仍然满足一致性。
中间节点故障 每个节点都存储一个sent_i节点，保存发送给后继节点但没有被尾节点处理的请求。master告知节点S+你前面的S失败； S+通知master最后更新的请求序号sn； mater通知S-它的新角色以及sn； S+向S-同步至sn。 新增节点 新增节点$T^+$增加在链尾，尾节点$T$将$Hist_{objID}^T$复制到$Hist_{objID}^{T^+}$，在复制过程中，同步处理客户端的请求，并将更新加入到$Send_T$,满足$Hist_{objID}^T = Hist_{objID}^{T+} + Sent_T$ 之后，$T$丢弃查询请求，把$Sent_T$发送给$T^+$，master通知客户端$T^+$成为新的链尾。</div><div class="post-footer">
        <a href="/chain-replication/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a>,&nbsp;<a href="/tags/chain-replication/">Chain Replication</a>,&nbsp;<a href="/tags/%E8%AE%BA%E6%96%87/">论文</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/zookeeper/">ZooKeeper论文阅读笔记</a>
    </h1><div class="post-meta"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Glitter</a>
</span>&nbsp;<span class="post-publish">published on <time datetime="2022-05-18">2022-05-18</time></span></div><div class="content"> ZooKeeper是一个分布式开源协调服务，它为更加复杂的协调原语提供了一个简单高效的内核，并为开发者提供了API以便他们能开发自己的协调原语。
ZooKeeper服务 服务概览 ZooKeeper给clients提供一个数据节点(znode)集合的抽象，client可以对这些znode进行数据操作，这些节点按层次结构组织。 client可以创造两种znode,
regular, client可以显式地创建和删除这些znode ephermeral,client可以显示地创建或删除，也可以让系统在创建了znode的session结束时自动删除 另外，client可以在创建znode时设置sequential flag，拥有sequential flag的znode会有一个单调增的sequence value,即父节点的sequence value小于子节点的值。 ZooKeeper实现了watch机制，client在数据变化时可以不用轮询就可以及时收到通知。一个watch只会在一个session中触发一次。如果在一个session中数据变化了两次，client只会收到一次通知，因为在数据第一次变化后watch已被触发失效了。
This is a tip session：一个client从连接到ZooKeeper到断开连接的过程称为一个session Client API create(path, data, flags)：在path下新建一个znode，将data保存在其中，flags用来设置znode类型，以及设置sequential标志；
delete(path, version)：如果version参数匹配，删除path对应的znode；
exists(path, watch)：检查path对应的znode是否存在，watch让client观测这个znode；
getdata(path, watch)：返回znode对应的数据和元数据，包括版本信息；
setdata(path, data, version): 如果version参数匹配，将data写入znode；
getChildren(path, watch)：返回znode的子节点
sync(path)：等待所有未决的更新。
以上这些API都有阻塞和非阻塞两个版本。
ZooKeeper保证 所有更新串行写入； 同一个client的请求按先到先服务顺序执行 原语示例 配置管理 将所有配置存储到一个znode中，其他节点通过watch机制获取更新。
会合 有些分布式系统包含一个主节点和多个工作节点，但这些节点都通过一个调度器调度，工作节点不知道主节点的地址和端口等配置信息。因此可以将主节点信息放入一个znode，工作节点通过znode获取主节点信息。
组成员关系 当一个组成员进程启动时，会在组对应的znode下创建一个ephemeral类型的子节点，该进程结束后子节点自动删除。进程也可以通过组znode的子节点获取组信息。
简单锁 锁可以通过创建一个ephemeral znode实现，如果创建成功，client获取锁。如果已经存在锁，client只能等待之前的锁被删除后才能创建自己的锁。
读写锁 写锁与普通锁类似，与其他锁互斥。而读锁间互相兼容，与写锁互斥。
双栅栏 双栅栏用来保证多个client的计算同时开始和同时结束。client开始计算前添加znode到barrier的znode之下，结束计算时删除znode。当barrier的znode下的子节点数达到阈值后才会启动计算。client可以等待一个特殊的ready的znode的创建，当数量到达阈值后创建。client退出的时候需要等待子znode全部被删除，同样可以通过删除ready删除。
ZooKeeper实现 请求处理器 leader收到写入请求后，会将其转换为幂等的事务，根据请求内容计算出新的数据、版本号和时间戳，等待应用到数据库中。
原子广播 ZooKeeper使用原子广播协议Zab,Zab使用简单多数投票确保一致性。Zab保证广播收到和发出的顺序是一致的。leader节点广播之前需要确保已经收到了前一个leader的广播
多副本数据库 当服务器故障后，使用周期性的快照和快照之后的日志恢复。创建快照的时候并不需要锁定，因为事务都是幂等的，因此再次应用已经应用的修改没有影响。
客户端-服务器交互 当server执行一个写入操作时，会通知watch的client并清楚watch。每个服务器只负责通知自己连接的客户端； 每个读取请求对应着一个zxid，对应服务器上看到的最后一个写入事务的ID。因为读取是在服务器本地进行，可能在读取之前的一些写入没有同步到客户端连接的服务器，ZooKeeper提供了sync操作，保证sync之后的读取操作都能够获得发生在sync之前的写入结果； 如果一个client连接到一个新的server，新server通过比较zxid,server zxid要大于client zxid,确保它的view不能低于client的view； 在超时时间内，server没有收到client的消息，server就会认为client session failure。因此，client要在在没有活动时发送heartbeat避免超时。 </div><div class="post-footer">
        <a href="/zookeeper/">Read More</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a>,&nbsp;<a href="/tags/zookeeper/">ZooKeeper</a></div></div>
</article></div></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.101.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Glitter</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/copy-tex.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.0/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.1/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@8.5.4/dist/index.umd.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"data":{"id-1":"Focus, Love, Passion"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.en","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
